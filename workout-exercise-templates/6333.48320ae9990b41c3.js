(self.webpackChunkworkout_exercise_templates=self.webpackChunkworkout_exercise_templates||[]).push([[6333],{6333:(ai,pe,T)=>{T.r(pe),T.d(pe,{ADD_ANONYMOUS_USER_EXERCISE_TEMPLATE_LIST_ERROR:()=>Gt,ADD_ANONYMOUS_USER_EXERCISE_TEMPLATE_LIST_REQUEST:()=>Ot,ADD_ANONYMOUS_USER_EXERCISE_TEMPLATE_LIST_SUCCESS:()=>Ct,ADD_ANONYMOUS_USER_TRAINING_LIST_ERROR:()=>ts,ADD_ANONYMOUS_USER_TRAINING_LIST_REQUEST:()=>Jt,ADD_ANONYMOUS_USER_TRAINING_LIST_SUCCESS:()=>es,ADD_AUTHENTICATED_USER_EXERCISE_TEMPLATE_LIST_ERROR:()=>ft,ADD_AUTHENTICATED_USER_EXERCISE_TEMPLATE_LIST_REQUEST:()=>gt,ADD_AUTHENTICATED_USER_EXERCISE_TEMPLATE_LIST_SUCCESS:()=>dt,ADD_AUTHENTICATED_USER_TRAINING_LIST_ERROR:()=>zt,ADD_AUTHENTICATED_USER_TRAINING_LIST_REQUEST:()=>Vt,ADD_AUTHENTICATED_USER_TRAINING_LIST_SUCCESS:()=>Wt,ADD_USER_EXERCISE_TEMPLATE_LIST_REQUEST:()=>Lt,ADD_USER_TRAINING_LIST_REQUEST:()=>kt,AppInit:()=>a,CLEAR_EXERCISE_TEMPLATE_LIST_QUERY_FILTER:()=>Pt,CLEAR_TRAINING_LIST_QUERY_FILTER:()=>As,CLOSE_NAVBAR:()=>Ns,END_REQUEST:()=>fe,EXERCISE_TEMPLATES_HUB_FEATURE_KEY:()=>ot,EXERCISE_TEMPLATES_LIST_FEATURE_KEY:()=>Z,ErrorMessageEffects:()=>Ds,ExerciseTemplatesListEffects:()=>js,GET_ANONYMOUS_USER_EXERCISE_TEMPLATES_LIST_ERROR:()=>pt,GET_ANONYMOUS_USER_EXERCISE_TEMPLATES_LIST_REQUEST:()=>_t,GET_ANONYMOUS_USER_EXERCISE_TEMPLATES_LIST_SUCCESS:()=>It,GET_ANONYMOUS_USER_SETTINGS_REQUEST:()=>Je,GET_ANONYMOUS_USER_SETTINGS_SUCCESS:()=>et,GET_ANONYMOUS_USER_TRAININGS_LIST_ERROR:()=>bt,GET_ANONYMOUS_USER_TRAININGS_LIST_REQUEST:()=>jt,GET_ANONYMOUS_USER_TRAININGS_LIST_SUCCESS:()=>Bt,GET_AUTHENTICATED_USER_DATA_ERROR:()=>ze,GET_AUTHENTICATED_USER_DATA_SUCCESS:()=>We,GET_AUTHENTICATED_USER_EXERCISE_TEMPLATES_LIST_ERROR:()=>At,GET_AUTHENTICATED_USER_EXERCISE_TEMPLATES_LIST_REQUEST:()=>Rt,GET_AUTHENTICATED_USER_EXERCISE_TEMPLATES_LIST_SUCCESS:()=>ut,GET_AUTHENTICATED_USER_SETTINGS_REQUEST:()=>Ve,GET_AUTHENTICATED_USER_TRAININGS_LIST_ERROR:()=>wt,GET_AUTHENTICATED_USER_TRAININGS_LIST_REQUEST:()=>vt,GET_AUTHENTICATED_USER_TRAININGS_LIST_SUCCESS:()=>Qt,GET_USER_EXERCISE_TEMPLATES_LIST_REQUEST:()=>St,GET_USER_SETTINGS_REQUEST:()=>ke,GET_USER_TRAININGS_LIST_REQUEST:()=>$t,INITIALIZE_LOADED_APPS:()=>ge,LAYOUT_FEATURE_KEY:()=>ls,LOADED_APP:()=>Ne,LOGIN_ERROR:()=>Me,LOGIN_GOOGLE_ERROR:()=>Ye,LOGIN_GOOGLE_REQUEST:()=>Pe,LOGIN_GOOGLE_SUCCESS:()=>Fe,LOGIN_REQUEST:()=>qe,LOGIN_SUCCESS:()=>ye,LOGOUT:()=>Ge,LayoutEffects:()=>ei,ROUTER_FEATURE_KEY:()=>ds,RequestEffects:()=>oi,RouterEffects:()=>Ei,SETTINGS_FEATURE_KEY:()=>Et,SET_ANONYMOUS_USER:()=>je,SET_AUTHENTICATED_USER:()=>Xe,SET_EXERCISE_TEMPLATE_LIST_MUSCLE_INVOLVED_QUERY_FILTER:()=>qt,SET_EXERCISE_TEMPLATE_LIST_NAME_QUERY_FILTER:()=>yt,SET_TRAINING_LIST_QUERY_FILTER:()=>us,SET_USER_INFO:()=>we,SHOW_ERROR:()=>Ke,SIGNUP_ERROR:()=>Qe,SIGNUP_REQUEST:()=>$e,SIGNUP_SUCCESS:()=>ve,START_REQUEST:()=>de,SWITCH_NAVBAR:()=>Is,SettingsEffects:()=>Ps,StoreModule:()=>Si,TRAININGS_HUB_FEATURE_KEY:()=>Ft,TRAININGS_LIST_FEATURE_KEY:()=>Re,TrainingsListEffects:()=>ks,UI_FEATURE_KEY:()=>Oe,UNLOADED_APP:()=>Le,UPDATE_ANONYMOUS_USER_TRAINING_LIST_ERROR:()=>as,UPDATE_ANONYMOUS_USER_TRAINING_LIST_REQUEST:()=>Ts,UPDATE_ANONYMOUS_USER_TRAINING_LIST_SUCCESS:()=>Ss,UPDATE_AUTHENTICATED_USER_TRAINING_LIST_ERROR:()=>ns,UPDATE_AUTHENTICATED_USER_TRAINING_LIST_REQUEST:()=>Es,UPDATE_AUTHENTICATED_USER_TRAINING_LIST_SUCCESS:()=>cs,UPDATE_USER_SETTINGS_REQUEST:()=>tt,UPDATE_USER_SETTINGS_SUCCESS:()=>it,UPDATE_USER_TRAINING_LIST_REQUEST:()=>is,USER_FEATURE_KEY:()=>be,UiEffects:()=>hs,UserEffects:()=>Ys,addAnonymousUserExerciseTemplateListRequest:()=>W,addAnonymousUserExerciseTemplateListRequestError:()=>mt,addAnonymousUserExerciseTemplateListRequestSuccess:()=>z,addAnonymousUserTrainingListRequest:()=>Ee,addAnonymousUserTrainingListRequestError:()=>ss,addAnonymousUserTrainingListRequestSuccess:()=>ce,addAuthenticatedUserExerciseTemplateListRequest:()=>k,addAuthenticatedUserExerciseTemplateListRequestError:()=>ht,addAuthenticatedUserExerciseTemplateListRequestSuccess:()=>V,addAuthenticatedUserTrainingListRequest:()=>ie,addAuthenticatedUserTrainingListRequestError:()=>Zt,addAuthenticatedUserTrainingListRequestSuccess:()=>re,addUserExerciseTemplateListRequest:()=>lt,addUserTrainingListRequest:()=>se,clearExerciseTemplateListQueryFilter:()=>xt,clearTrainingListQueryFilter:()=>ae,closeNavBar:()=>Ae,endRequest:()=>l,exerciseTemplatesHubInitialState:()=>Bs,exerciseTemplatesListInitialState:()=>R,exerciseTemplatesListReducer:()=>Hs,getAnonymousUserExerciseTemplatesListRequest:()=>K,getAnonymousUserExerciseTemplatesListRequestError:()=>Nt,getAnonymousUserExerciseTemplatesListRequestSuccess:()=>y,getAnonymousUserSettingsRequest:()=>j,getAnonymousUserSettingsRequestSuccess:()=>m,getAnonymousUserTrainingsListRequest:()=>te,getAnonymousUserTrainingsListRequestError:()=>Kt,getAnonymousUserTrainingsListRequestSuccess:()=>x,getAuthenticatedUserExerciseTemplatesListRequest:()=>b,getAuthenticatedUserExerciseTemplatesListRequestError:()=>Ut,getAuthenticatedUserExerciseTemplatesListRequestSuccess:()=>D,getAuthenticatedUserSettingsRequest:()=>X,getAuthenticatedUserSettingsRequestError:()=>Ze,getAuthenticatedUserSettingsRequestSuccess:()=>G,getAuthenticatedUserTrainingsListRequest:()=>ee,getAuthenticatedUserTrainingsListRequestError:()=>Xt,getAuthenticatedUserTrainingsListRequestSuccess:()=>P,getCurrentRoute:()=>ci,getExerciseTemplateById:()=>Xs,getExerciseTemplatesList:()=>J,getExerciseTemplatesListFiltered:()=>Qs,getExerciseTemplatesListFilters:()=>ws,getExerciseTemplatesListState:()=>N,getIsAppLoaded:()=>Cs,getIsBlockByRequest:()=>Os,getIsNewUser:()=>nt,getIsUILoadedApp:()=>Ce,getIsUserLogged:()=>$s,getLayoutState:()=>_e,getMenu:()=>ti,getMenuNavBarIsOpened:()=>si,getPrevRoute:()=>ni,getRouterState:()=>Ie,getSettingsState:()=>ct,getTrainingById:()=>zs,getTrainingListOngoing:()=>_s,getTrainingsList:()=>ue,getTrainingsListFilters:()=>Vs,getTrainingsListPagination:()=>Ws,getTrainingsListQuery:()=>Us,getTrainingsListState:()=>A,getUiState:()=>g,getUser:()=>S,getUserExerciseTemplatesListRequest:()=>at,getUserSettings:()=>xs,getUserSettingsRequest:()=>w,getUserState:()=>q,getUserTrainingsListRequest:()=>Ht,initializeLoadedApps:()=>Y,layoutInitialState:()=>Ls,layoutReducer:()=>Js,loadedApp:()=>p,logOutRequest:()=>me,loginGoogleRequest:()=>xe,loginGoogleRequestError:()=>H,loginGoogleRequestSuccess:()=>f,loginRequest:()=>De,loginRequestError:()=>$,loginRequestSuccess:()=>d,routerInitialState:()=>gs,routerReducer:()=>ii,selectExerciseTemplatesHubFeature:()=>Tt,selectTrainingsHubFeature:()=>Yt,setAnonymousUser:()=>I,setAuthenticatedUser:()=>_,setExerciseTemplateListMuscleInvolvedQueryFilter:()=>Dt,setExerciseTemplateListNameQueryFilter:()=>Mt,setTrainingListQueryFilter:()=>Se,setUserInfo:()=>Q,settingsInitialState:()=>rt,settingsReducer:()=>ys,showError:()=>O,signUpRequest:()=>He,signUpRequestError:()=>v,signUpRequestSuccess:()=>h,startRequest:()=>L,switchNavBar:()=>ps,trainingsHubInitialState:()=>Zs,trainingsListInitialState:()=>u,trainingsListReducer:()=>bs,uiInitialState:()=>he,uiReducer:()=>fs,unloadedApp:()=>le,updateAnonymousUserTrainingListRequest:()=>oe,updateAnonymousUserTrainingListRequestError:()=>Rs,updateAnonymousUserTrainingListRequestSuccess:()=>Te,updateAuthenticatedUserTrainingListRequest:()=>F,updateAuthenticatedUserTrainingListRequestError:()=>os,updateAuthenticatedUserTrainingListRequestSuccess:()=>ne,updateUserSettingsRequest:()=>st,updateUserSettingsRequestSuccess:()=>B,updateUserTrainingListRequest:()=>rs,userInitialState:()=>Be,userReducer:()=>Gs});var t=T(5793);const Ne="LOADED_APP",p=(0,t.createAction)(Ne,(0,t.props)()),Le="UNLOADED_APP",le=(0,t.createAction)(Le,(0,t.props)()),ge="INITIALIZE_LOADED_APPS",Y=(0,t.createAction)(ge),de="START_REQUEST",L=(0,t.createAction)(de),fe="END_REQUEST",l=(0,t.createAction)(fe),he={actionOngoing:!1,blockByRequest:!1,requestCounter:0,loadedApps:[]};var a=function(e){return e.UI="UI",e.ACCOUNT="ACCOUNT",e.EXERCISES_TEMPLATES="EXERCISES_TEMPLATES",e.TRAININGS="TRAININGS",e}(a||{});const Oe="ui",fs=(0,t.createReducer)(he,(0,t.on)(p,(e,{initialized:c})=>({...e,loadedApps:e.loadedApps.includes(c)?e.loadedApps:e.loadedApps.concat([c])})),(0,t.on)(le,(e,{uninitialized:c})=>({...e,loadedApps:e.loadedApps.filter(r=>r!==c)})),(0,t.on)(Y,e=>({...e,loadedApps:[a.ACCOUNT]})),(0,t.on)(L,e=>({...e,actionOngoing:!0,blockByRequest:!0,requestCounter:e.requestCounter+1})),(0,t.on)(l,e=>({...e,actionOngoing:!1,blockByRequest:1!==e.requestCounter&&e.blockByRequest,requestCounter:e.requestCounter-1})));var o=T(3731),i=T(1705),s=T(3635);let hs=(()=>{class e{constructor(){this.actions$=(0,o.inject)(i.Actions),this.requestsCounter=0,this.requestOnGoing=new s.BehaviorSubject(!1),this.initRequest$=(0,i.createEffect)(()=>this.actions$.pipe((0,i.ofType)(L),(0,s.tap)(()=>{++this.requestsCounter,1===this.requestsCounter&&this.requestOnGoing.next(!0)})),{dispatch:!1}),this.endRequest$=(0,i.createEffect)(()=>this.actions$.pipe((0,i.ofType)(l),(0,s.tap)(()=>{--this.requestsCounter,0===this.requestsCounter&&this.requestOnGoing.next(!1)})),{dispatch:!1})}static#e=this.\u0275fac=function(E){return new(E||e)};static#t=this.\u0275prov=o.\u0275\u0275defineInjectable({token:e,factory:e.\u0275fac})}return e})();const g=(0,t.createFeatureSelector)(Oe),Os=(0,t.createSelector)(g,e=>e.blockByRequest),Ce=(0,t.createSelector)(g,e=>e.loadedApps.findIndex(c=>c===a.UI)>-1),Cs=e=>(0,t.createSelector)(g,c=>c.loadedApps.findIndex(r=>r===e)>-1),Ge="LOGOUT_USER",me=(0,t.createAction)(Ge),qe="LOGIN Request",De=(0,t.createAction)(qe,(0,t.props)()),ye="LOGIN Success",d=(0,t.createAction)(ye,(0,t.props)()),Me="LOGIN Error",$=(0,t.createAction)(Me,(0,t.props)()),Pe="LOGIN Google Request",xe=(0,t.createAction)(Pe),Fe="LOGIN Google Success",f=(0,t.createAction)(Fe,(0,t.props)()),Ye="LOGIN Google Error",H=(0,t.createAction)(Ye,(0,t.props)()),$e="SIGNUP Request",He=(0,t.createAction)($e,(0,t.props)()),ve="SIGNUP Success",h=(0,t.createAction)(ve,(0,t.props)()),Qe="SIGNUP Error",v=(0,t.createAction)(Qe,(0,t.props)()),we="SET USER INFO",Q=(0,t.createAction)(we,(0,t.props)()),Xe="SET AUTHENTICATED USER",_=(0,t.createAction)(Xe,(0,t.props)()),je="SET ANONYMOUS USER",I=(0,t.createAction)(je),Be={user:void 0,isLogged:!1,isNewUser:!1,userName:void 0},be="user",Gs=(0,t.createReducer)(Be,(0,t.on)(Q,(e,{isNewUser:c,userName:r})=>({...e,isNewUser:c,userName:r})),(0,t.on)(_,(e,{user:c})=>({...e,user:c,isLogged:!0,isNewUser:!0,userName:void 0})),(0,t.on)(I,e=>({...e,user:void 0,isLogged:!1,settings:void 0,userName:void 0})));var ms=T(4270);const Ke="SHOW ERROR",O=(0,t.createAction)(Ke,(0,t.props)());var qs=T(4809),C=T(3114);let Ds=(()=>{class e{constructor(){this.actions$=(0,o.inject)(i.Actions),this.messageService=(0,o.inject)(qs.MessageService),this.showError$=(0,i.createEffect)(()=>this.actions$.pipe((0,i.ofType)(O),(0,s.tap)(({errorMessage:r})=>{this.messageService.showAlertMessage(C.MessageTypes.Error,r)})),{dispatch:!1})}static#e=this.\u0275fac=function(E){return new(E||e)};static#t=this.\u0275prov=o.\u0275\u0275defineInjectable({token:e,factory:e.\u0275fac})}return e})();const ke="GET USER SETTINGS",w=(0,t.createAction)(ke),Ve="GET AUTHENTICATED USER SETTINGS Request",X=(0,t.createAction)(Ve),We="GET AUTHENTICATED USER SETTINGS Success",G=(0,t.createAction)(We,(0,t.props)()),ze="GET AUTHENTICATED USER SETTINGS Success",Ze=(0,t.createAction)(ze,(0,t.props)()),Je="GET ANONYMOUS USER SETTINGS Request",j=(0,t.createAction)(Je),et="GET ANONYMOUS USER SETTINGS Success",m=(0,t.createAction)(et,(0,t.props)()),tt="UPDATE USER SETTINGS Request",st=(0,t.createAction)(tt,(0,t.props)()),it="UPDATE USER SETTINGS Success",B=(0,t.createAction)(it,(0,t.props)()),rt={userSettings:void 0},Et="settings",ys=(0,t.createReducer)(rt,(0,t.on)(G,m,B,(e,{userSettings:c})=>({...e,userSettings:c})));var Ms=T(7983);let Ps=(()=>{class e{constructor(){this.actions$=(0,o.inject)(i.Actions),this.userSettingsService=(0,o.inject)(Ms.UserSettingsService),this.store=(0,o.inject)(t.Store),this.getUserSettingsRequest$=(0,i.createEffect)(()=>this.actions$.pipe((0,i.ofType)(w),(0,i.concatLatestFrom)(()=>this.store.select(S)),(0,s.switchMap)(([r,E])=>(0,s.iif)(()=>!!E,(0,s.of)(X()),(0,s.of)(j()))))),this.getAuthenticatedUserSettingsRequest$=(0,i.createEffect)(()=>this.actions$.pipe((0,i.ofType)(X),(0,i.concatLatestFrom)(()=>[this.store.select(S),this.store.select(nt)]),(0,s.switchMap)(([r,E,n])=>(n?this.userSettingsService.setUserSettings(E?.uid):this.userSettingsService.getUserSettings(E?.uid)).pipe((0,s.map)(U=>G({userSettings:U})),(0,s.catchError)(U=>(0,s.of)(Ze({error:U}))))))),this.getAnonymousUserSettingsRequest$=(0,i.createEffect)(()=>this.actions$.pipe((0,i.ofType)(j),(0,s.switchMap)(()=>this.userSettingsService.getAnonymousSettings().pipe((0,s.map)(r=>m({userSettings:r})))))),this.updateUserSettings$=(0,i.createEffect)(()=>this.actions$.pipe((0,i.ofType)(st),(0,i.concatLatestFrom)(()=>this.store.select(S)),(0,s.switchMap)(([{userSettings:r},E])=>(E?this.userSettingsService.updateUserSettings(E.uid,r):this.userSettingsService.updateAnonymousSettings(r)).pipe((0,s.map)(n=>B({userSettings:n})))))),this.UserSettingsLoaded$=(0,i.createEffect)(()=>this.actions$.pipe((0,i.ofType)(G,m),(0,i.concatLatestFrom)(()=>this.store.select(Ce)),(0,s.switchMap)(([r,E])=>(0,s.iif)(()=>!E,(0,s.of)(p({initialized:a.UI})),s.EMPTY))))}static#e=this.\u0275fac=function(E){return new(E||e)};static#t=this.\u0275prov=o.\u0275\u0275defineInjectable({token:e,factory:e.\u0275fac})}return e})();const ct=(0,t.createFeatureSelector)(Et),xs=(0,t.createSelector)(ct,e=>e.userSettings);var Fs=T(9964);let Ys=(()=>{class e{constructor(){this.authService=(0,o.inject)(ms.AuthService),this.store=(0,o.inject)(t.Store),this.router=(0,o.inject)(Fs.Router),this.actions$=(0,o.inject)(i.Actions),this.loginRequest$=(0,i.createEffect)(()=>this.actions$.pipe((0,i.ofType)(De),(0,s.switchMap)(({userEmail:r,userPass:E})=>this.authService.logIn(r,E).pipe((0,s.map)(n=>d({credentials:n})),(0,s.catchError)(n=>(0,s.of)($({error:n}))))))),this.loginGoogleRequest$=(0,i.createEffect)(()=>this.actions$.pipe((0,i.ofType)(xe),(0,s.switchMap)(()=>this.authService.googleSignIn().pipe((0,s.map)(r=>f({credentials:Object.freeze(r)})),(0,s.catchError)(r=>(0,s.of)(H({error:r}))))))),this.loginRequestSuccess$=(0,i.createEffect)(()=>this.actions$.pipe((0,i.ofType)(d,f),(0,s.switchMap)(()=>this.router.navigate([C.AppRoutes.Home]))),{dispatch:!1}),this.loginRequestError$=(0,i.createEffect)(()=>this.actions$.pipe((0,i.ofType)($,H),(0,s.switchMap)(({error:r})=>(0,s.of)(O({errorMessage:r.code}))))),this.signUpRequest$=(0,i.createEffect)(()=>this.actions$.pipe((0,i.ofType)(He),(0,s.switchMap)(({userEmail:r,userPass:E})=>this.authService.signUp(r,E).pipe((0,s.map)(n=>h({credentials:Object.freeze(n)})),(0,s.catchError)(n=>(0,s.of)(v({error:n}))))))),this.signUpRequestSuccess$=(0,i.createEffect)(()=>this.actions$.pipe((0,i.ofType)(h),(0,s.switchMap)(()=>this.router.navigate([C.AppRoutes.Home]))),{dispatch:!1}),this.signUpRequestError$=(0,i.createEffect)(()=>this.actions$.pipe((0,i.ofType)(v),(0,s.switchMap)(({error:r})=>(0,s.of)(O({errorMessage:r.code}))))),this.checkNewUser$=(0,i.createEffect)(()=>this.actions$.pipe((0,i.ofType)(h,f,d),(0,s.switchMap)(({credentials:r})=>(0,s.of)(Q({isNewUser:this.authService.isNewUser(r),userName:r.additionalUserInfo?.username??void 0}))))),this.logOut$=(0,i.createEffect)(()=>this.actions$.pipe((0,i.ofType)(me),(0,s.switchMap)(()=>this.authService.logOut().pipe((0,s.tap)(()=>this.router.navigate([C.AppRoutes.Home]))))),{dispatch:!1}),this.setUser$=(0,i.createEffect)(()=>this.actions$.pipe((0,i.ofType)(_,I),(0,s.switchMap)(()=>(0,s.of)(Y())))),this.setUserSettings$=(0,i.createEffect)(()=>this.actions$.pipe((0,i.ofType)(_,I),(0,s.switchMap)(()=>(0,s.of)(w()))))}static#e=this.\u0275fac=function(E){return new(E||e)};static#t=this.\u0275prov=o.\u0275\u0275defineInjectable({token:e,factory:e.\u0275fac})}return e})();const q=(0,t.createFeatureSelector)(be),S=(0,t.createSelector)(q,e=>e.user),$s=(0,t.createSelector)(q,e=>e.isLogged),nt=(0,t.createSelector)(q,e=>e.isNewUser),ot="workout_exercise_templates",Tt=(0,t.createFeatureSelector)(ot),St="GET USER EXERCISE TEMPLATES LIST",at=(0,t.createAction)(St),Rt="GET AUTHENTICATED USER EXERCISE TEMPLATES LIST Request",b=(0,t.createAction)(Rt),ut="GET AUTHENTICATED USER EXERCISE TEMPLATES LIST Success",D=(0,t.createAction)(ut,(0,t.props)()),At="GET AUTHENTICATED USER EXERCISE TEMPLATES LIST Error",Ut=(0,t.createAction)(At,(0,t.props)()),_t="GET ANONYMOUS USER EXERCISE TEMPLATES LIST Request",K=(0,t.createAction)(_t),It="GET ANONYMOUS USER EXERCISE TEMPLATES LIST Success",y=(0,t.createAction)(It,(0,t.props)()),pt="GET ANONYMOUS USER EXERCISE TEMPLATES LIST Error",Nt=(0,t.createAction)(pt,(0,t.props)()),Lt="ADD USER EXERCISE TEMPLATE LIST",lt=(0,t.createAction)(Lt,(0,t.props)()),gt="ADD AUTHENTICATED USER EXERCISE TEMPLATE LIST Request",k=(0,t.createAction)(gt,(0,t.props)()),dt="ADD AUTHENTICATED USER EXERCISE TEMPLATE LIST Success",V=(0,t.createAction)(dt,(0,t.props)()),ft="ADD AUTHENTICATED USER EXERCISE TEMPLATE LIST Error",ht=(0,t.createAction)(ft,(0,t.props)()),Ot="ADD ANONYMOUS USER EXERCISE TEMPLATE LIST Request",W=(0,t.createAction)(Ot,(0,t.props)()),Ct="ADD ANONYMOUS USER EXERCISE TEMPLATE LIST Success",z=(0,t.createAction)(Ct,(0,t.props)()),Gt="ADD ANONYMOUS USER EXERCISE TEMPLATE LIST Error",mt=(0,t.createAction)(Gt,(0,t.props)()),qt="SET EXERCISE TEMPLATE LIST TYPE QUERY FILTER",Dt=(0,t.createAction)(qt,(0,t.props)()),yt="SET EXERCISE TEMPLATE LIST NAME QUERY FILTER",Mt=(0,t.createAction)(yt,(0,t.props)()),Pt="CLEAR EXERCISE TEMPLATE LIST QUERY FILTER",xt=(0,t.createAction)(Pt),R={list:[],filtered:[],query:{filters:{byName:"",byMuscles:[]}}},Z="exercise-templates-list",Hs=(0,t.createReducer)(R,(0,t.on)(I,_,e=>({...R})),(0,t.on)(y,D,(e,{exercises:c})=>({...e,list:c,filtered:c})),(0,t.on)(Dt,(e,{muscleInvolved:c})=>{const r={...e.query.filters,byMuscles:e.query.filters.byMuscles.includes(c)?e.query.filters.byMuscles.filter(E=>E!==c):[...e.query.filters.byMuscles,c]};return{...e,query:{...e.query,filters:{...r}},filtered:M(e.list,r)}}),(0,t.on)(Mt,(e,{exerciseName:c})=>{const r={...e.query.filters,byName:c};return{...e,query:{...e.query,filters:{...r}},filtered:M(e.list,r)}}),(0,t.on)(V,z,(e,{exercise:c})=>({...e,list:[...e.list,c],filtered:M([...e.list,c],R.query.filters)})),(0,t.on)(xt,e=>({...e,query:{...e.query,filters:R.query.filters},filtered:M(e.list,R.query.filters)}))),M=(e,c)=>{let r=[];return r=e.filter(E=>E.name.includes(c.byName)),c.byMuscles.length>0&&(r=r.filter(E=>c.byMuscles.some(n=>E.musclesInvolved.includes(n)))),r};var vs=T(8467);const N=(0,t.createSelector)(Tt,e=>e[Z]),J=(0,t.createSelector)(N,e=>e.list),Qs=(0,t.createSelector)(N,e=>e.filtered),ws=(0,t.createSelector)(N,e=>e.query.filters),Xs=e=>(0,t.createSelector)(N,c=>c.list.find(r=>r.id===e));let js=(()=>{class e{constructor(){this.exerciseTemplatesService=(0,o.inject)(vs.ExerciseTemplatesService),this.store=(0,o.inject)(t.Store),this.actions$=(0,o.inject)(i.Actions),this.getUserExerciseTemplatesListRequest$=(0,i.createEffect)(()=>this.actions$.pipe((0,i.ofType)(at),(0,i.concatLatestFrom)(()=>this.store.select(S)),(0,s.switchMap)(([r,E])=>(0,s.iif)(()=>!!E,(0,s.of)(b()),(0,s.of)(K()))))),this.getAuthenticatedUserExerciseTemplatesListRequest$=(0,i.createEffect)(()=>this.actions$.pipe((0,i.ofType)(b),(0,i.concatLatestFrom)(()=>this.store.select(S)),(0,s.switchMap)(([r,E])=>this.exerciseTemplatesService.getExerciseTemplates(E?.uid).pipe((0,s.map)(n=>D({exercises:n})),(0,s.catchError)(n=>(0,s.of)(Ut({error:n}))))))),this.getAnonymousUserExerciseTemplatesListRequest$=(0,i.createEffect)(()=>this.actions$.pipe((0,i.ofType)(K),(0,s.switchMap)(()=>this.store.select(J).pipe((0,s.take)(1),(0,s.map)(r=>y({exercises:r})),(0,s.catchError)(r=>(0,s.of)(Nt({error:r}))))))),this.getUserExerciseTemplatesListSuccess$=(0,i.createEffect)(()=>this.actions$.pipe((0,i.ofType)(D,y),(0,s.switchMap)(({})=>(0,s.of)(p({initialized:a.EXERCISES_TEMPLATES}))))),this.addUserExerciseTemplateListRequest$=(0,i.createEffect)(()=>this.actions$.pipe((0,i.ofType)(lt),(0,i.concatLatestFrom)(()=>this.store.select(S)),(0,s.switchMap)(([{exercise:r},E])=>(0,s.iif)(()=>!!E,(0,s.of)(k({exercise:r})),(0,s.of)(W({exercise:r})))))),this.addAuthenticatedUserExerciseTemplateListRequest$=(0,i.createEffect)(()=>this.actions$.pipe((0,i.ofType)(k),(0,i.concatLatestFrom)(()=>this.store.select(S)),(0,s.switchMap)(([{exercise:r},E])=>this.exerciseTemplatesService.setExerciseTemplate(E?.uid,r).pipe((0,s.map)(n=>V({exercise:n})),(0,s.catchError)(n=>(console.log("err",n),(0,s.of)(ht({error:n})))))))),this.addAnonymousUserExerciseTemplateListRequest$=(0,i.createEffect)(()=>this.actions$.pipe((0,i.ofType)(W),(0,i.concatLatestFrom)(()=>this.store.select(J)),(0,s.switchMap)(([{exercise:r},E])=>(0,s.of)(r).pipe((0,s.take)(1),(0,s.map)(n=>z({exercise:{...n,id:(E.length+1).toString()}})),(0,s.catchError)(n=>(0,s.of)(mt({error:n})))))))}static#e=this.\u0275fac=function(E){return new(E||e)};static#t=this.\u0275prov=o.\u0275\u0275defineInjectable({token:e,factory:e.\u0275fac})}return e})();const Bs={[Z]:R},Ft="workout_training",Yt=(0,t.createFeatureSelector)(Ft),$t="GET USER TRAININGS LIST",Ht=(0,t.createAction)($t),vt="GET AUTHENTICATED USER TRAININGS LIST Request",ee=(0,t.createAction)(vt),Qt="GET AUTHENTICATED USER TRAININGS LIST Success",P=(0,t.createAction)(Qt,(0,t.props)()),wt="GET AUTHENTICATED USER TRAININGS LIST Error",Xt=(0,t.createAction)(wt,(0,t.props)()),jt="GET ANONYMOUS USER TRAININGS LIST Request",te=(0,t.createAction)(jt),Bt="GET ANONYMOUS USER TRAININGS LIST Success",x=(0,t.createAction)(Bt,(0,t.props)()),bt="GET ANONYMOUS USER TRAININGS LIST Error",Kt=(0,t.createAction)(bt,(0,t.props)()),kt="ADD USER TRAINING LIST",se=(0,t.createAction)(kt,(0,t.props)()),Vt="ADD AUTHENTICATED USER TRAINING LIST Request",ie=(0,t.createAction)(Vt,(0,t.props)()),Wt="ADD AUTHENTICATED USER TRAINING LIST Success",re=(0,t.createAction)(Wt,(0,t.props)()),zt="ADD AUTHENTICATED USER TRAINING LIST Error",Zt=(0,t.createAction)(zt,(0,t.props)()),Jt="ADD ANONYMOUS USER TRAINING LIST Request",Ee=(0,t.createAction)(Jt,(0,t.props)()),es="ADD ANONYMOUS USER TRAINING LIST Success",ce=(0,t.createAction)(es,(0,t.props)()),ts="ADD ANONYMOUS USER TRAINING LIST Error",ss=(0,t.createAction)(ts,(0,t.props)()),is="UPDATE USER TRAINING LIST",rs=(0,t.createAction)(is,(0,t.props)()),Es="UPDATE AUTHENTICATED USER TRAINING LIST Request",F=(0,t.createAction)(Es,(0,t.props)()),cs="UPDATE AUTHENTICATED USER TRAINING LIST Success",ne=(0,t.createAction)(cs,(0,t.props)()),ns="UPDATE AUTHENTICATED USER TRAINING LIST Error",os=(0,t.createAction)(ns,(0,t.props)()),Ts="UPDATE ANONYMOUS USER TRAINING LIST Request",oe=(0,t.createAction)(Ts,(0,t.props)()),Ss="UPDATE ANONYMOUS USER TRAINING LIST Success",Te=(0,t.createAction)(Ss,(0,t.props)()),as="UPDATE ANONYMOUS USER TRAINING LIST Error",Rs=(0,t.createAction)(as,(0,t.props)()),us="SET TRAINING LIST QUERY FILTER",Se=(0,t.createAction)(us,(0,t.props)()),As="CLEAR TRAINING LIST QUERY FILTER",ae=(0,t.createAction)(As),u={list:[],query:{filters:{betweenDates:void 0,muscleGroups:[]},pagination:{pageElements:10,moreElements:!0,lastElement:void 0}}},Re="trainings-list",bs=(0,t.createReducer)(u,(0,t.on)(I,_,e=>({...u})),(0,t.on)(P,(e,{trainings:c})=>({...e,list:[...e.list,...c],query:{...e.query,pagination:{...e.query.pagination,moreElements:c.length===e.query.pagination.pageElements,lastElement:c[c.length-1]}}})),(0,t.on)(x,(e,{trainings:c})=>({...e,list:[...c],query:{...e.query,pagination:{...e.query.pagination,moreElements:!1,lastElement:void 0}}})),(0,t.on)(Se,(e,{filters:c})=>({...e,list:[],query:{...e.query,pagination:{...u.query.pagination},filters:{...e.query.filters,...c}}})),(0,t.on)(re,ce,(e,{training:c})=>({...e,list:[c,...e.list]})),(0,t.on)(ne,Te,(e,{training:c})=>{const r=[...e.list].findIndex(n=>n.id===c.id),E=[...e.list];return-1!==r&&E.splice(r,1,{...c}),{...e,list:[...E]}}),(0,t.on)(ae,e=>({...e,list:[],query:{...e.query,filters:u.query.filters,pagination:{...u.query.pagination}}})));var Ks=T(1021);let ks=(()=>{class e{constructor(){this.trainingsService=(0,o.inject)(Ks.TrainingsService),this.store=(0,o.inject)(t.Store),this.actions$=(0,o.inject)(i.Actions),this.getUserTrainingsListRequest$=(0,i.createEffect)(()=>this.actions$.pipe((0,i.ofType)(Ht,Se,ae),(0,i.concatLatestFrom)(()=>this.store.select(S)),(0,s.switchMap)(([r,E])=>(0,s.iif)(()=>!!E,(0,s.of)(ee()),(0,s.of)(te()))))),this.getAuthenticatedUserTrainingsListRequest$=(0,i.createEffect)(()=>this.actions$.pipe((0,i.ofType)(ee),(0,i.concatLatestFrom)(()=>[this.store.select(S),this.store.select(Us)]),(0,s.switchMap)(([r,E,n])=>this.trainingsService.getTrainings(E?.uid,n).pipe((0,s.map)(U=>P({trainings:U})),(0,s.catchError)(U=>(0,s.of)(Xt({error:U}))))))),this.getAnonymousUserTrainingsListRequest$=(0,i.createEffect)(()=>this.actions$.pipe((0,i.ofType)(te),(0,s.switchMap)(()=>this.store.select(ue).pipe((0,s.take)(1),(0,s.map)(r=>x({trainings:r})),(0,s.catchError)(r=>(0,s.of)(Kt({error:r}))))))),this.getUserTrainingsListSuccess$=(0,i.createEffect)(()=>this.actions$.pipe((0,i.ofType)(P,x),(0,s.switchMap)(({})=>(0,s.of)(p({initialized:a.TRAININGS}))))),this.finishUserTrainingListOnGoingRequest$=(0,i.createEffect)(()=>this.actions$.pipe((0,i.ofType)(se),(0,i.concatLatestFrom)(()=>[this.store.select(_s)]),(0,s.filter)(([r,E])=>!!E),(0,s.switchMap)(([r,E])=>(0,s.of)(F({training:{...E,finishDate:new Date}}))))),this.addUserTrainingListRequest$=(0,i.createEffect)(()=>this.actions$.pipe((0,i.ofType)(se),(0,i.concatLatestFrom)(()=>this.store.select(S)),(0,s.switchMap)(([{training:r},E])=>(0,s.iif)(()=>!!E,(0,s.of)(ie({training:r})),(0,s.of)(Ee({training:r})))))),this.addAuthenticatedUserTrainingListRequest$=(0,i.createEffect)(()=>this.actions$.pipe((0,i.ofType)(ie),(0,i.concatLatestFrom)(()=>this.store.select(S)),(0,s.switchMap)(([{training:r},E])=>this.trainingsService.setTraining(E?.uid,r).pipe((0,s.map)(n=>re({training:n})),(0,s.catchError)(n=>(console.log("err",n),(0,s.of)(Zt({error:n})))))))),this.addAnonymousUserTrainingListRequest$=(0,i.createEffect)(()=>this.actions$.pipe((0,i.ofType)(Ee),(0,i.concatLatestFrom)(()=>this.store.select(ue)),(0,s.switchMap)(([{training:r},E])=>(0,s.of)(r).pipe((0,s.take)(1),(0,s.map)(n=>ce({training:{...n,id:(E.length+1).toString()}})),(0,s.catchError)(n=>(0,s.of)(ss({error:n}))))))),this.updateUserTrainingListRequest$=(0,i.createEffect)(()=>this.actions$.pipe((0,i.ofType)(rs),(0,i.concatLatestFrom)(()=>this.store.select(S)),(0,s.switchMap)(([{training:r},E])=>(0,s.iif)(()=>!!E,(0,s.of)(F({training:r})),(0,s.of)(oe({training:r})))))),this.updateAuthenticatedUserTrainingListRequest$=(0,i.createEffect)(()=>this.actions$.pipe((0,i.ofType)(F),(0,i.concatLatestFrom)(()=>this.store.select(S)),(0,s.switchMap)(([{training:r},E])=>this.trainingsService.updateTraining(E?.uid,r).pipe((0,s.map)(n=>ne({training:n})),(0,s.catchError)(n=>(console.log("err",n),(0,s.of)(os({error:n})))))))),this.updateAnonymousUserTrainingListRequest$=(0,i.createEffect)(()=>this.actions$.pipe((0,i.ofType)(oe),(0,s.switchMap)(({training:r})=>(0,s.of)(r).pipe((0,s.take)(1),(0,s.map)(E=>Te({training:E})),(0,s.catchError)(E=>(0,s.of)(Rs({error:E})))))))}static#e=this.\u0275fac=function(E){return new(E||e)};static#t=this.\u0275prov=o.\u0275\u0275defineInjectable({token:e,factory:e.\u0275fac})}return e})();const A=(0,t.createSelector)(Yt,e=>e[Re]),ue=(0,t.createSelector)(A,e=>e.list),Us=(0,t.createSelector)(A,e=>e.query),Vs=(0,t.createSelector)(A,e=>e.query.filters),Ws=(0,t.createSelector)(A,e=>e.query.pagination),_s=(0,t.createSelector)(A,e=>e.list.find(c=>!c.finishDate)),zs=e=>(0,t.createSelector)(A,c=>c.list.find(r=>r.id===e)),Zs={[Re]:u},Is="SWITCH_NAVBAR",ps=(0,t.createAction)(Is),Ns="CLOSE_NAVBAR",Ae=(0,t.createAction)(Ns),Ls={menu:{navBar:{isOpened:!1}}},ls="layout",Js=(0,t.createReducer)(Ls,(0,t.on)(ps,e=>({...e,menu:{...e.menu,navBar:{...e.menu.navBar,isOpened:!e.menu.navBar.isOpened}}})),(0,t.on)(Ae,e=>({...e,menu:{...e.menu,navBar:{...e.menu.navBar,isOpened:!1}}}))),Ue=(0,t.createAction)("SET CURRENT ROUTE",(0,t.props)());let ei=(()=>{class e{constructor(){this.actions$=(0,o.inject)(i.Actions),this.setCurrentRoute$=(0,i.createEffect)(()=>this.actions$.pipe((0,i.ofType)(Ue),(0,s.switchMap)(()=>(0,s.of)(Ae()))))}static#e=this.\u0275fac=function(E){return new(E||e)};static#t=this.\u0275prov=o.\u0275\u0275defineInjectable({token:e,factory:e.\u0275fac})}return e})();const _e=(0,t.createFeatureSelector)(ls),ti=(0,t.createSelector)(_e,e=>e.menu),si=(0,t.createSelector)(_e,e=>e.menu.navBar.isOpened),gs={prevRoute:void 0,currentRoute:void 0},ds="router",ii=(0,t.createReducer)(gs,(0,t.on)(Ue,(e,{currentRoute:c})=>({...e,currentRoute:c,prevRoute:e.currentRoute})));var ri=T(2042);let Ei=(()=>{class e{constructor(){this.actions$=(0,o.inject)(i.Actions),this.routerNavigatedAction$=(0,i.createEffect)(()=>this.actions$.pipe((0,i.ofType)(ri.routerNavigatedAction),(0,s.switchMap)(({payload:r})=>(0,s.of)(Ue({currentRoute:r.routerState.url})))))}static#e=this.\u0275fac=function(E){return new(E||e)};static#t=this.\u0275prov=o.\u0275\u0275defineInjectable({token:e,factory:e.\u0275fac})}return e})();const Ie=(0,t.createFeatureSelector)(ds),ci=(0,t.createSelector)(Ie,e=>e.currentRoute),ni=(0,t.createSelector)(Ie,e=>e.prevRoute);let oi=(()=>{class e{constructor(){this.actions$=(0,o.inject)(i.Actions),this.initRequest$=(0,i.createEffect)(()=>this.actions$.pipe((0,s.filter)(r=>r.type.endsWith("Request")),(0,s.concatMap)(()=>(0,s.of)(L())))),this.endRequest$=(0,i.createEffect)(()=>this.actions$.pipe((0,s.filter)(r=>r.type.endsWith("Success")||r.type.endsWith("Error")),(0,s.concatMap)(()=>(0,s.of)(l()))))}static#e=this.\u0275fac=function(E){return new(E||e)};static#t=this.\u0275prov=o.\u0275\u0275defineInjectable({token:e,factory:e.\u0275fac})}return e})();var Ti=T(6571);let Si=(()=>{class e{static#e=this.\u0275fac=function(E){return new(E||e)};static#t=this.\u0275mod=o.\u0275\u0275defineNgModule({type:e});static#s=this.\u0275inj=o.\u0275\u0275defineInjector({imports:[Ti.CommonModule]})}return e})()}}]);