(self.webpackChunkworkout_exercise_templates=self.webpackChunkworkout_exercise_templates||[]).push([[3163],{3163:(ni,_e,T)=>{T.r(_e),T.d(_e,{ADD_ANONYMOUS_USER_EXERCISE_TEMPLATE_LIST_ERROR:()=>ft,ADD_ANONYMOUS_USER_EXERCISE_TEMPLATE_LIST_REQUEST:()=>gt,ADD_ANONYMOUS_USER_EXERCISE_TEMPLATE_LIST_SUCCESS:()=>dt,ADD_ANONYMOUS_USER_TRAINING_LIST_ERROR:()=>Wt,ADD_ANONYMOUS_USER_TRAINING_LIST_REQUEST:()=>Kt,ADD_ANONYMOUS_USER_TRAINING_LIST_SUCCESS:()=>Vt,ADD_AUTHENTICATED_USER_EXERCISE_TEMPLATE_LIST_ERROR:()=>Lt,ADD_AUTHENTICATED_USER_EXERCISE_TEMPLATE_LIST_REQUEST:()=>pt,ADD_AUTHENTICATED_USER_EXERCISE_TEMPLATE_LIST_SUCCESS:()=>Nt,ADD_AUTHENTICATED_USER_TRAINING_LIST_ERROR:()=>bt,ADD_AUTHENTICATED_USER_TRAINING_LIST_REQUEST:()=>jt,ADD_AUTHENTICATED_USER_TRAINING_LIST_SUCCESS:()=>Bt,ADD_USER_EXERCISE_TEMPLATE_LIST_REQUEST:()=>_t,ADD_USER_TRAINING_LIST_REQUEST:()=>Xt,AppInit:()=>R,CLEAR_EXERCISE_TEMPLATE_LIST_QUERY_FILTER:()=>qt,CLEAR_TRAINING_LIST_QUERY_FILTER:()=>Ts,CLOSE_NAVBAR:()=>Us,END_REQUEST:()=>ge,EXERCISE_TEMPLATES_LIST_FEATURE_KEY:()=>yt,ErrorMessageEffects:()=>Cs,ExerciseTemplatesListEffects:()=>Qs,GET_ANONYMOUS_USER_EXERCISE_TEMPLATES_LIST_ERROR:()=>At,GET_ANONYMOUS_USER_EXERCISE_TEMPLATES_LIST_REQUEST:()=>Rt,GET_ANONYMOUS_USER_EXERCISE_TEMPLATES_LIST_SUCCESS:()=>ut,GET_ANONYMOUS_USER_SETTINGS_REQUEST:()=>ze,GET_ANONYMOUS_USER_SETTINGS_SUCCESS:()=>Ze,GET_ANONYMOUS_USER_TRAININGS_LIST_ERROR:()=>Ht,GET_ANONYMOUS_USER_TRAININGS_LIST_REQUEST:()=>vt,GET_ANONYMOUS_USER_TRAININGS_LIST_SUCCESS:()=>Qt,GET_AUTHENTICATED_USER_DATA_ERROR:()=>Ve,GET_AUTHENTICATED_USER_DATA_SUCCESS:()=>Ke,GET_AUTHENTICATED_USER_EXERCISE_TEMPLATES_LIST_ERROR:()=>St,GET_AUTHENTICATED_USER_EXERCISE_TEMPLATES_LIST_REQUEST:()=>ot,GET_AUTHENTICATED_USER_EXERCISE_TEMPLATES_LIST_SUCCESS:()=>Tt,GET_AUTHENTICATED_USER_SETTINGS_REQUEST:()=>ke,GET_AUTHENTICATED_USER_TRAININGS_LIST_ERROR:()=>Yt,GET_AUTHENTICATED_USER_TRAININGS_LIST_REQUEST:()=>xt,GET_AUTHENTICATED_USER_TRAININGS_LIST_SUCCESS:()=>$t,GET_USER_EXERCISE_TEMPLATES_LIST_REQUEST:()=>nt,GET_USER_SETTINGS_REQUEST:()=>be,GET_USER_TRAININGS_LIST_REQUEST:()=>Mt,INITIALIZE_LOADED_APPS:()=>Le,LAYOUT_FEATURE_KEY:()=>Is,LOADED_APP:()=>Ie,LOGIN_ERROR:()=>De,LOGIN_GOOGLE_ERROR:()=>xe,LOGIN_GOOGLE_REQUEST:()=>ye,LOGIN_GOOGLE_SUCCESS:()=>Pe,LOGIN_REQUEST:()=>Ge,LOGIN_SUCCESS:()=>qe,LOGOUT:()=>Oe,LayoutEffects:()=>Vs,ROUTER_FEATURE_KEY:()=>Ns,RequestEffects:()=>ii,RouterEffects:()=>ei,SETTINGS_FEATURE_KEY:()=>it,SET_ANONYMOUS_USER:()=>we,SET_AUTHENTICATED_USER:()=>He,SET_EXERCISE_TEMPLATE_LIST_MUSCLE_INVOLVED_QUERY_FILTER:()=>Ot,SET_EXERCISE_TEMPLATE_LIST_NAME_QUERY_FILTER:()=>Gt,SET_TRAINING_LIST_QUERY_FILTER:()=>os,SET_USER_INFO:()=>Qe,SHOW_ERROR:()=>Be,SIGNUP_ERROR:()=>ve,SIGNUP_REQUEST:()=>$e,SIGNUP_SUCCESS:()=>Fe,START_REQUEST:()=>le,SWITCH_NAVBAR:()=>us,SettingsEffects:()=>qs,StoreModule:()=>ci,TRAININGS_LIST_FEATURE_KEY:()=>Ss,TrainingsListEffects:()=>Xs,UI_FEATURE_KEY:()=>fe,UNLOADED_APP:()=>pe,UPDATE_ANONYMOUS_USER_TRAINING_LIST_ERROR:()=>ns,UPDATE_ANONYMOUS_USER_TRAINING_LIST_REQUEST:()=>rs,UPDATE_ANONYMOUS_USER_TRAINING_LIST_SUCCESS:()=>cs,UPDATE_AUTHENTICATED_USER_TRAINING_LIST_ERROR:()=>ss,UPDATE_AUTHENTICATED_USER_TRAINING_LIST_REQUEST:()=>es,UPDATE_AUTHENTICATED_USER_TRAINING_LIST_SUCCESS:()=>ts,UPDATE_USER_SETTINGS_REQUEST:()=>Je,UPDATE_USER_SETTINGS_SUCCESS:()=>tt,UPDATE_USER_TRAINING_LIST_REQUEST:()=>Zt,USER_FEATURE_KEY:()=>je,UiEffects:()=>ls,UserEffects:()=>Ms,addAnonymousUserExerciseTemplateListRequest:()=>W,addAnonymousUserExerciseTemplateListRequestError:()=>ht,addAnonymousUserExerciseTemplateListRequestSuccess:()=>z,addAnonymousUserTrainingListRequest:()=>re,addAnonymousUserTrainingListRequestError:()=>zt,addAnonymousUserTrainingListRequestSuccess:()=>ce,addAuthenticatedUserExerciseTemplateListRequest:()=>K,addAuthenticatedUserExerciseTemplateListRequestError:()=>lt,addAuthenticatedUserExerciseTemplateListRequestSuccess:()=>V,addAuthenticatedUserTrainingListRequest:()=>se,addAuthenticatedUserTrainingListRequestError:()=>kt,addAuthenticatedUserTrainingListRequestSuccess:()=>ie,addUserExerciseTemplateListRequest:()=>It,addUserTrainingListRequest:()=>te,clearExerciseTemplateListQueryFilter:()=>Dt,clearTrainingListQueryFilter:()=>Se,closeNavBar:()=>Re,endRequest:()=>l,exerciseTemplatesListInitialState:()=>_,exerciseTemplatesListReducer:()=>xs,getAnonymousUserExerciseTemplatesListRequest:()=>k,getAnonymousUserExerciseTemplatesListRequestError:()=>Ut,getAnonymousUserExerciseTemplatesListRequestSuccess:()=>y,getAnonymousUserSettingsRequest:()=>j,getAnonymousUserSettingsRequestSuccess:()=>m,getAnonymousUserTrainingsListRequest:()=>ee,getAnonymousUserTrainingsListRequestError:()=>wt,getAnonymousUserTrainingsListRequestSuccess:()=>x,getAuthenticatedUserExerciseTemplatesListRequest:()=>b,getAuthenticatedUserExerciseTemplatesListRequestError:()=>at,getAuthenticatedUserExerciseTemplatesListRequestSuccess:()=>D,getAuthenticatedUserSettingsRequest:()=>X,getAuthenticatedUserSettingsRequestError:()=>We,getAuthenticatedUserSettingsRequestSuccess:()=>G,getAuthenticatedUserTrainingsListRequest:()=>J,getAuthenticatedUserTrainingsListRequestError:()=>Ft,getAuthenticatedUserTrainingsListRequestSuccess:()=>P,getCurrentRoute:()=>ti,getExerciseTemplateById:()=>vs,getExerciseTemplatesList:()=>Z,getExerciseTemplatesListFiltered:()=>Ys,getExerciseTemplatesListFilters:()=>Fs,getExerciseTemplatesListState:()=>N,getIsAppLoaded:()=>ds,getIsBlockByRequest:()=>gs,getIsNewUser:()=>ct,getIsUILoadedApp:()=>he,getIsUserLogged:()=>Ps,getLayoutState:()=>Ae,getMenu:()=>Ws,getMenuNavBarIsOpened:()=>zs,getPrevRoute:()=>si,getRouterState:()=>Ue,getSettingsState:()=>rt,getTrainingById:()=>bs,getTrainingListOngoing:()=>Rs,getTrainingsByExerciseTemplateId:()=>ks,getTrainingsList:()=>ae,getTrainingsListFilters:()=>js,getTrainingsListPagination:()=>Bs,getTrainingsListQuery:()=>as,getTrainingsListState:()=>a,getUiState:()=>g,getUser:()=>S,getUserExerciseTemplatesListRequest:()=>Et,getUserSettings:()=>Ds,getUserSettingsRequest:()=>w,getUserState:()=>q,getUserTrainingsListRequest:()=>Pt,initializeLoadedApps:()=>Y,layoutInitialState:()=>_s,layoutReducer:()=>Ks,loadedApp:()=>p,logOutRequest:()=>Ce,loginGoogleRequest:()=>Me,loginGoogleRequestError:()=>v,loginGoogleRequestSuccess:()=>f,loginRequest:()=>me,loginRequestError:()=>F,loginRequestSuccess:()=>d,routerInitialState:()=>ps,routerReducer:()=>Zs,setAnonymousUser:()=>U,setAuthenticatedUser:()=>A,setExerciseTemplateListMuscleInvolvedQueryFilter:()=>Ct,setExerciseTemplateListNameQueryFilter:()=>mt,setTrainingListQueryFilter:()=>Te,setUserInfo:()=>H,settingsInitialState:()=>st,settingsReducer:()=>Gs,showError:()=>O,signUpRequest:()=>Ye,signUpRequestError:()=>Q,signUpRequestSuccess:()=>h,startRequest:()=>L,switchNavBar:()=>As,trainingsListInitialState:()=>I,trainingsListReducer:()=>Hs,uiInitialState:()=>de,uiReducer:()=>Ls,unloadedApp:()=>Ne,updateAnonymousUserTrainingListRequest:()=>Ee,updateAnonymousUserTrainingListRequestError:()=>Es,updateAnonymousUserTrainingListRequestSuccess:()=>oe,updateAuthenticatedUserTrainingListRequest:()=>$,updateAuthenticatedUserTrainingListRequestError:()=>is,updateAuthenticatedUserTrainingListRequestSuccess:()=>ne,updateUserSettingsRequest:()=>et,updateUserSettingsRequestSuccess:()=>B,updateUserTrainingListRequest:()=>Jt,userInitialState:()=>Xe,userReducer:()=>fs});var t=T(5793);const Ie="LOADED_APP",p=(0,t.createAction)(Ie,(0,t.props)()),pe="UNLOADED_APP",Ne=(0,t.createAction)(pe,(0,t.props)()),Le="INITIALIZE_LOADED_APPS",Y=(0,t.createAction)(Le),le="START_REQUEST",L=(0,t.createAction)(le),ge="END_REQUEST",l=(0,t.createAction)(ge),de={actionOngoing:!1,blockByRequest:!1,requestCounter:0,loadedApps:[]};var R=function(e){return e.UI="UI",e.ACCOUNT="ACCOUNT",e.EXERCISES_TEMPLATES="EXERCISES_TEMPLATES",e.TRAININGS="TRAININGS",e}(R||{});const fe="ui",Ls=(0,t.createReducer)(de,(0,t.on)(p,(e,{initialized:n})=>({...e,loadedApps:e.loadedApps.includes(n)?e.loadedApps:e.loadedApps.concat([n])})),(0,t.on)(Ne,(e,{uninitialized:n})=>({...e,loadedApps:e.loadedApps.filter(r=>r!==n)})),(0,t.on)(Y,e=>({...e,loadedApps:[R.ACCOUNT]})),(0,t.on)(L,e=>({...e,actionOngoing:!0,blockByRequest:!0,requestCounter:e.requestCounter+1})),(0,t.on)(l,e=>({...e,actionOngoing:!1,blockByRequest:1!==e.requestCounter&&e.blockByRequest,requestCounter:e.requestCounter-1})));var o=T(3731),i=T(1705),s=T(3635);let ls=(()=>{class e{constructor(){this.actions$=(0,o.inject)(i.Actions),this.requestsCounter=0,this.requestOnGoing=new s.BehaviorSubject(!1),this.initRequest$=(0,i.createEffect)(()=>this.actions$.pipe((0,i.ofType)(L),(0,s.tap)(()=>{++this.requestsCounter,1===this.requestsCounter&&this.requestOnGoing.next(!0)})),{dispatch:!1}),this.endRequest$=(0,i.createEffect)(()=>this.actions$.pipe((0,i.ofType)(l),(0,s.tap)(()=>{--this.requestsCounter,0===this.requestsCounter&&this.requestOnGoing.next(!1)})),{dispatch:!1})}static#e=this.\u0275fac=function(c){return new(c||e)};static#t=this.\u0275prov=o.\u0275\u0275defineInjectable({token:e,factory:e.\u0275fac})}return e})();const g=(0,t.createFeatureSelector)(fe),gs=(0,t.createSelector)(g,e=>e.blockByRequest),he=(0,t.createSelector)(g,e=>e.loadedApps.findIndex(n=>n===R.UI)>-1),ds=e=>(0,t.createSelector)(g,n=>n.loadedApps.findIndex(r=>r===e)>-1),Oe="LOGOUT_USER",Ce=(0,t.createAction)(Oe),Ge="LOGIN Request",me=(0,t.createAction)(Ge,(0,t.props)()),qe="LOGIN Success",d=(0,t.createAction)(qe,(0,t.props)()),De="LOGIN Error",F=(0,t.createAction)(De,(0,t.props)()),ye="LOGIN Google Request",Me=(0,t.createAction)(ye),Pe="LOGIN Google Success",f=(0,t.createAction)(Pe,(0,t.props)()),xe="LOGIN Google Error",v=(0,t.createAction)(xe,(0,t.props)()),$e="SIGNUP Request",Ye=(0,t.createAction)($e,(0,t.props)()),Fe="SIGNUP Success",h=(0,t.createAction)(Fe,(0,t.props)()),ve="SIGNUP Error",Q=(0,t.createAction)(ve,(0,t.props)()),Qe="SET USER INFO",H=(0,t.createAction)(Qe,(0,t.props)()),He="SET AUTHENTICATED USER",A=(0,t.createAction)(He,(0,t.props)()),we="SET ANONYMOUS USER",U=(0,t.createAction)(we),Xe={user:void 0,isLogged:!1,isNewUser:!1,userName:void 0},je="user",fs=(0,t.createReducer)(Xe,(0,t.on)(H,(e,{isNewUser:n,userName:r})=>({...e,isNewUser:n,userName:r})),(0,t.on)(A,(e,{user:n})=>({...e,user:n,isLogged:!0,isNewUser:!0,userName:void 0})),(0,t.on)(U,e=>({...e,user:void 0,isLogged:!1,settings:void 0,userName:void 0})));var hs=T(4270);const Be="SHOW ERROR",O=(0,t.createAction)(Be,(0,t.props)());var Os=T(4809),C=T(3114);let Cs=(()=>{class e{constructor(){this.actions$=(0,o.inject)(i.Actions),this.messageService=(0,o.inject)(Os.MessageService),this.showError$=(0,i.createEffect)(()=>this.actions$.pipe((0,i.ofType)(O),(0,s.tap)(({errorMessage:r})=>{this.messageService.showAlertMessage(C.MessageTypes.Error,r)})),{dispatch:!1})}static#e=this.\u0275fac=function(c){return new(c||e)};static#t=this.\u0275prov=o.\u0275\u0275defineInjectable({token:e,factory:e.\u0275fac})}return e})();const be="GET USER SETTINGS",w=(0,t.createAction)(be),ke="GET AUTHENTICATED USER SETTINGS Request",X=(0,t.createAction)(ke),Ke="GET AUTHENTICATED USER SETTINGS Success",G=(0,t.createAction)(Ke,(0,t.props)()),Ve="GET AUTHENTICATED USER SETTINGS Success",We=(0,t.createAction)(Ve,(0,t.props)()),ze="GET ANONYMOUS USER SETTINGS Request",j=(0,t.createAction)(ze),Ze="GET ANONYMOUS USER SETTINGS Success",m=(0,t.createAction)(Ze,(0,t.props)()),Je="UPDATE USER SETTINGS Request",et=(0,t.createAction)(Je,(0,t.props)()),tt="UPDATE USER SETTINGS Success",B=(0,t.createAction)(tt,(0,t.props)()),st={userSettings:void 0},it="settings",Gs=(0,t.createReducer)(st,(0,t.on)(G,m,B,(e,{userSettings:n})=>({...e,userSettings:n})));var ms=T(7983);let qs=(()=>{class e{constructor(){this.actions$=(0,o.inject)(i.Actions),this.userSettingsService=(0,o.inject)(ms.UserSettingsService),this.store=(0,o.inject)(t.Store),this.getUserSettingsRequest$=(0,i.createEffect)(()=>this.actions$.pipe((0,i.ofType)(w),(0,i.concatLatestFrom)(()=>this.store.select(S)),(0,s.switchMap)(([r,c])=>(0,s.iif)(()=>!!c,(0,s.of)(X()),(0,s.of)(j()))))),this.getAuthenticatedUserSettingsRequest$=(0,i.createEffect)(()=>this.actions$.pipe((0,i.ofType)(X),(0,i.concatLatestFrom)(()=>[this.store.select(S),this.store.select(ct)]),(0,s.switchMap)(([r,c,E])=>(E?this.userSettingsService.setUserSettings(c?.uid):this.userSettingsService.getUserSettings(c?.uid)).pipe((0,s.map)(u=>G({userSettings:u})),(0,s.catchError)(u=>(0,s.of)(We({error:u}))))))),this.getAnonymousUserSettingsRequest$=(0,i.createEffect)(()=>this.actions$.pipe((0,i.ofType)(j),(0,s.switchMap)(()=>this.userSettingsService.getAnonymousSettings().pipe((0,s.map)(r=>m({userSettings:r})))))),this.updateUserSettings$=(0,i.createEffect)(()=>this.actions$.pipe((0,i.ofType)(et),(0,i.concatLatestFrom)(()=>this.store.select(S)),(0,s.switchMap)(([{userSettings:r},c])=>(c?this.userSettingsService.updateUserSettings(c.uid,r):this.userSettingsService.updateAnonymousSettings(r)).pipe((0,s.map)(E=>B({userSettings:E})))))),this.UserSettingsLoaded$=(0,i.createEffect)(()=>this.actions$.pipe((0,i.ofType)(G,m),(0,i.concatLatestFrom)(()=>this.store.select(he)),(0,s.switchMap)(([r,c])=>(0,s.iif)(()=>!c,(0,s.of)(p({initialized:R.UI})),s.EMPTY))))}static#e=this.\u0275fac=function(c){return new(c||e)};static#t=this.\u0275prov=o.\u0275\u0275defineInjectable({token:e,factory:e.\u0275fac})}return e})();const rt=(0,t.createFeatureSelector)(it),Ds=(0,t.createSelector)(rt,e=>e.userSettings);var ys=T(9964);let Ms=(()=>{class e{constructor(){this.authService=(0,o.inject)(hs.AuthService),this.store=(0,o.inject)(t.Store),this.router=(0,o.inject)(ys.Router),this.actions$=(0,o.inject)(i.Actions),this.loginRequest$=(0,i.createEffect)(()=>this.actions$.pipe((0,i.ofType)(me),(0,s.switchMap)(({userEmail:r,userPass:c})=>this.authService.logIn(r,c).pipe((0,s.map)(E=>d({credentials:E})),(0,s.catchError)(E=>(0,s.of)(F({error:E}))))))),this.loginGoogleRequest$=(0,i.createEffect)(()=>this.actions$.pipe((0,i.ofType)(Me),(0,s.switchMap)(()=>this.authService.googleSignIn().pipe((0,s.map)(r=>f({credentials:Object.freeze(r)})),(0,s.catchError)(r=>(0,s.of)(v({error:r}))))))),this.loginRequestSuccess$=(0,i.createEffect)(()=>this.actions$.pipe((0,i.ofType)(d,f),(0,s.switchMap)(()=>this.router.navigate([C.AppRoutes.Home]))),{dispatch:!1}),this.loginRequestError$=(0,i.createEffect)(()=>this.actions$.pipe((0,i.ofType)(F,v),(0,s.switchMap)(({error:r})=>(0,s.of)(O({errorMessage:r.code}))))),this.signUpRequest$=(0,i.createEffect)(()=>this.actions$.pipe((0,i.ofType)(Ye),(0,s.switchMap)(({userEmail:r,userPass:c})=>this.authService.signUp(r,c).pipe((0,s.map)(E=>h({credentials:Object.freeze(E)})),(0,s.catchError)(E=>(0,s.of)(Q({error:E}))))))),this.signUpRequestSuccess$=(0,i.createEffect)(()=>this.actions$.pipe((0,i.ofType)(h),(0,s.switchMap)(()=>this.router.navigate([C.AppRoutes.Home]))),{dispatch:!1}),this.signUpRequestError$=(0,i.createEffect)(()=>this.actions$.pipe((0,i.ofType)(Q),(0,s.switchMap)(({error:r})=>(0,s.of)(O({errorMessage:r.code}))))),this.checkNewUser$=(0,i.createEffect)(()=>this.actions$.pipe((0,i.ofType)(h,f,d),(0,s.switchMap)(({credentials:r})=>(0,s.of)(H({isNewUser:this.authService.isNewUser(r),userName:r.additionalUserInfo?.username??void 0}))))),this.logOut$=(0,i.createEffect)(()=>this.actions$.pipe((0,i.ofType)(Ce),(0,s.switchMap)(()=>this.authService.logOut().pipe((0,s.tap)(()=>this.router.navigate([C.AppRoutes.Home]))))),{dispatch:!1}),this.setUser$=(0,i.createEffect)(()=>this.actions$.pipe((0,i.ofType)(A,U),(0,s.switchMap)(()=>(0,s.of)(Y())))),this.setUserSettings$=(0,i.createEffect)(()=>this.actions$.pipe((0,i.ofType)(A,U),(0,s.switchMap)(()=>(0,s.of)(w()))))}static#e=this.\u0275fac=function(c){return new(c||e)};static#t=this.\u0275prov=o.\u0275\u0275defineInjectable({token:e,factory:e.\u0275fac})}return e})();const q=(0,t.createFeatureSelector)(je),S=(0,t.createSelector)(q,e=>e.user),Ps=(0,t.createSelector)(q,e=>e.isLogged),ct=(0,t.createSelector)(q,e=>e.isNewUser),nt="GET USER EXERCISE TEMPLATES LIST",Et=(0,t.createAction)(nt),ot="GET AUTHENTICATED USER EXERCISE TEMPLATES LIST Request",b=(0,t.createAction)(ot),Tt="GET AUTHENTICATED USER EXERCISE TEMPLATES LIST Success",D=(0,t.createAction)(Tt,(0,t.props)()),St="GET AUTHENTICATED USER EXERCISE TEMPLATES LIST Error",at=(0,t.createAction)(St,(0,t.props)()),Rt="GET ANONYMOUS USER EXERCISE TEMPLATES LIST Request",k=(0,t.createAction)(Rt),ut="GET ANONYMOUS USER EXERCISE TEMPLATES LIST Success",y=(0,t.createAction)(ut,(0,t.props)()),At="GET ANONYMOUS USER EXERCISE TEMPLATES LIST Error",Ut=(0,t.createAction)(At,(0,t.props)()),_t="ADD USER EXERCISE TEMPLATE LIST",It=(0,t.createAction)(_t,(0,t.props)()),pt="ADD AUTHENTICATED USER EXERCISE TEMPLATE LIST Request",K=(0,t.createAction)(pt,(0,t.props)()),Nt="ADD AUTHENTICATED USER EXERCISE TEMPLATE LIST Success",V=(0,t.createAction)(Nt,(0,t.props)()),Lt="ADD AUTHENTICATED USER EXERCISE TEMPLATE LIST Error",lt=(0,t.createAction)(Lt,(0,t.props)()),gt="ADD ANONYMOUS USER EXERCISE TEMPLATE LIST Request",W=(0,t.createAction)(gt,(0,t.props)()),dt="ADD ANONYMOUS USER EXERCISE TEMPLATE LIST Success",z=(0,t.createAction)(dt,(0,t.props)()),ft="ADD ANONYMOUS USER EXERCISE TEMPLATE LIST Error",ht=(0,t.createAction)(ft,(0,t.props)()),Ot="SET EXERCISE TEMPLATE LIST TYPE QUERY FILTER",Ct=(0,t.createAction)(Ot,(0,t.props)()),Gt="SET EXERCISE TEMPLATE LIST NAME QUERY FILTER",mt=(0,t.createAction)(Gt,(0,t.props)()),qt="CLEAR EXERCISE TEMPLATE LIST QUERY FILTER",Dt=(0,t.createAction)(qt),_={list:[],filtered:[],query:{filters:{byName:"",byMuscles:[]}}},yt="exercise-templates-list",xs=(0,t.createReducer)(_,(0,t.on)(U,A,e=>({..._})),(0,t.on)(y,D,(e,{exercises:n})=>({...e,list:n,filtered:n})),(0,t.on)(Ct,(e,{muscleInvolved:n})=>{const r={...e.query.filters,byMuscles:e.query.filters.byMuscles.includes(n)?e.query.filters.byMuscles.filter(c=>c!==n):[...e.query.filters.byMuscles,n]};return{...e,query:{...e.query,filters:{...r}},filtered:M(e.list,r)}}),(0,t.on)(mt,(e,{exerciseName:n})=>{const r={...e.query.filters,byName:n};return{...e,query:{...e.query,filters:{...r}},filtered:M(e.list,r)}}),(0,t.on)(V,z,(e,{exercise:n})=>({...e,list:[...e.list,n],filtered:M([...e.list,n],_.query.filters)})),(0,t.on)(Dt,e=>({...e,query:{...e.query,filters:_.query.filters},filtered:M(e.list,_.query.filters)}))),M=(e,n)=>{let r=[];return r=e.filter(c=>c.name.includes(n.byName)),n.byMuscles.length>0&&(r=r.filter(c=>n.byMuscles.some(E=>c.musclesInvolved.includes(E)))),r};var $s=T(8467);const N=(0,t.createFeatureSelector)(yt),Z=(0,t.createSelector)(N,e=>e.list),Ys=(0,t.createSelector)(N,e=>e.filtered),Fs=(0,t.createSelector)(N,e=>e.query.filters),vs=e=>(0,t.createSelector)(N,n=>n.list.find(r=>r.id===e));let Qs=(()=>{class e{constructor(){this.exerciseTemplatesService=(0,o.inject)($s.ExerciseTemplatesService),this.store=(0,o.inject)(t.Store),this.actions$=(0,o.inject)(i.Actions),this.getUserExerciseTemplatesListRequest$=(0,i.createEffect)(()=>this.actions$.pipe((0,i.ofType)(Et),(0,i.concatLatestFrom)(()=>this.store.select(S)),(0,s.switchMap)(([r,c])=>(0,s.iif)(()=>!!c,(0,s.of)(b()),(0,s.of)(k()))))),this.getAuthenticatedUserExerciseTemplatesListRequest$=(0,i.createEffect)(()=>this.actions$.pipe((0,i.ofType)(b),(0,i.concatLatestFrom)(()=>this.store.select(S)),(0,s.switchMap)(([r,c])=>this.exerciseTemplatesService.getExerciseTemplates(c?.uid).pipe((0,s.map)(E=>D({exercises:E})),(0,s.catchError)(E=>(0,s.of)(at({error:E}))))))),this.getAnonymousUserExerciseTemplatesListRequest$=(0,i.createEffect)(()=>this.actions$.pipe((0,i.ofType)(k),(0,s.switchMap)(()=>this.store.select(Z).pipe((0,s.take)(1),(0,s.map)(r=>y({exercises:r})),(0,s.catchError)(r=>(0,s.of)(Ut({error:r}))))))),this.getUserExerciseTemplatesListSuccess$=(0,i.createEffect)(()=>this.actions$.pipe((0,i.ofType)(D,y),(0,s.switchMap)(({})=>(0,s.of)(p({initialized:R.EXERCISES_TEMPLATES}))))),this.addUserExerciseTemplateListRequest$=(0,i.createEffect)(()=>this.actions$.pipe((0,i.ofType)(It),(0,i.concatLatestFrom)(()=>this.store.select(S)),(0,s.switchMap)(([{exercise:r},c])=>(0,s.iif)(()=>!!c,(0,s.of)(K({exercise:r})),(0,s.of)(W({exercise:r})))))),this.addAuthenticatedUserExerciseTemplateListRequest$=(0,i.createEffect)(()=>this.actions$.pipe((0,i.ofType)(K),(0,i.concatLatestFrom)(()=>this.store.select(S)),(0,s.switchMap)(([{exercise:r},c])=>this.exerciseTemplatesService.setExerciseTemplate(c?.uid,r).pipe((0,s.map)(E=>V({exercise:E})),(0,s.catchError)(E=>(console.log("err",E),(0,s.of)(lt({error:E})))))))),this.addAnonymousUserExerciseTemplateListRequest$=(0,i.createEffect)(()=>this.actions$.pipe((0,i.ofType)(W),(0,i.concatLatestFrom)(()=>this.store.select(Z)),(0,s.switchMap)(([{exercise:r},c])=>(0,s.of)(r).pipe((0,s.take)(1),(0,s.map)(E=>z({exercise:{...E,id:(c.length+1).toString()}})),(0,s.catchError)(E=>(0,s.of)(ht({error:E})))))))}static#e=this.\u0275fac=function(c){return new(c||e)};static#t=this.\u0275prov=o.\u0275\u0275defineInjectable({token:e,factory:e.\u0275fac})}return e})();const Mt="GET USER TRAININGS LIST",Pt=(0,t.createAction)(Mt),xt="GET AUTHENTICATED USER TRAININGS LIST Request",J=(0,t.createAction)(xt),$t="GET AUTHENTICATED USER TRAININGS LIST Success",P=(0,t.createAction)($t,(0,t.props)()),Yt="GET AUTHENTICATED USER TRAININGS LIST Error",Ft=(0,t.createAction)(Yt,(0,t.props)()),vt="GET ANONYMOUS USER TRAININGS LIST Request",ee=(0,t.createAction)(vt),Qt="GET ANONYMOUS USER TRAININGS LIST Success",x=(0,t.createAction)(Qt,(0,t.props)()),Ht="GET ANONYMOUS USER TRAININGS LIST Error",wt=(0,t.createAction)(Ht,(0,t.props)()),Xt="ADD USER TRAINING LIST",te=(0,t.createAction)(Xt,(0,t.props)()),jt="ADD AUTHENTICATED USER TRAINING LIST Request",se=(0,t.createAction)(jt,(0,t.props)()),Bt="ADD AUTHENTICATED USER TRAINING LIST Success",ie=(0,t.createAction)(Bt,(0,t.props)()),bt="ADD AUTHENTICATED USER TRAINING LIST Error",kt=(0,t.createAction)(bt,(0,t.props)()),Kt="ADD ANONYMOUS USER TRAINING LIST Request",re=(0,t.createAction)(Kt,(0,t.props)()),Vt="ADD ANONYMOUS USER TRAINING LIST Success",ce=(0,t.createAction)(Vt,(0,t.props)()),Wt="ADD ANONYMOUS USER TRAINING LIST Error",zt=(0,t.createAction)(Wt,(0,t.props)()),Zt="UPDATE USER TRAINING LIST",Jt=(0,t.createAction)(Zt,(0,t.props)()),es="UPDATE AUTHENTICATED USER TRAINING LIST Request",$=(0,t.createAction)(es,(0,t.props)()),ts="UPDATE AUTHENTICATED USER TRAINING LIST Success",ne=(0,t.createAction)(ts,(0,t.props)()),ss="UPDATE AUTHENTICATED USER TRAINING LIST Error",is=(0,t.createAction)(ss,(0,t.props)()),rs="UPDATE ANONYMOUS USER TRAINING LIST Request",Ee=(0,t.createAction)(rs,(0,t.props)()),cs="UPDATE ANONYMOUS USER TRAINING LIST Success",oe=(0,t.createAction)(cs,(0,t.props)()),ns="UPDATE ANONYMOUS USER TRAINING LIST Error",Es=(0,t.createAction)(ns,(0,t.props)()),os="SET TRAINING LIST QUERY FILTER",Te=(0,t.createAction)(os,(0,t.props)()),Ts="CLEAR TRAINING LIST QUERY FILTER",Se=(0,t.createAction)(Ts),I={list:[],query:{filters:{betweenDates:void 0,muscleGroups:[]},pagination:{pageElements:10,moreElements:!0,lastElement:void 0}}},Ss="trainings-list",Hs=(0,t.createReducer)(I,(0,t.on)(U,A,e=>({...I})),(0,t.on)(P,(e,{trainings:n})=>({...e,list:[...e.list,...n],query:{...e.query,pagination:{...e.query.pagination,moreElements:n.length===e.query.pagination.pageElements,lastElement:n[n.length-1]}}})),(0,t.on)(x,(e,{trainings:n})=>({...e,list:[...n],query:{...e.query,pagination:{...e.query.pagination,moreElements:!1,lastElement:void 0}}})),(0,t.on)(Te,(e,{filters:n})=>({...e,list:[],query:{...e.query,pagination:{...I.query.pagination},filters:{...e.query.filters,...n}}})),(0,t.on)(ie,ce,(e,{training:n})=>({...e,list:[n,...e.list]})),(0,t.on)(ne,oe,(e,{training:n})=>{const r=[...e.list].findIndex(E=>E.id===n.id),c=[...e.list];return-1!==r&&c.splice(r,1,{...n}),{...e,list:[...c]}}),(0,t.on)(Se,e=>({...e,list:[],query:{...e.query,filters:I.query.filters,pagination:{...I.query.pagination}}})));var ws=T(8034);let Xs=(()=>{class e{constructor(){this.trainingsService=(0,o.inject)(ws.TrainingsService),this.store=(0,o.inject)(t.Store),this.actions$=(0,o.inject)(i.Actions),this.getUserTrainingsListRequest$=(0,i.createEffect)(()=>this.actions$.pipe((0,i.ofType)(Pt,Te,Se),(0,i.concatLatestFrom)(()=>this.store.select(S)),(0,s.switchMap)(([r,c])=>(0,s.iif)(()=>!!c,(0,s.of)(J()),(0,s.of)(ee()))))),this.getAuthenticatedUserTrainingsListRequest$=(0,i.createEffect)(()=>this.actions$.pipe((0,i.ofType)(J),(0,i.concatLatestFrom)(()=>[this.store.select(S),this.store.select(as)]),(0,s.switchMap)(([r,c,E])=>this.trainingsService.getTrainings(c?.uid,E).pipe((0,s.map)(u=>P({trainings:u})),(0,s.catchError)(u=>(0,s.of)(Ft({error:u}))))))),this.getAnonymousUserTrainingsListRequest$=(0,i.createEffect)(()=>this.actions$.pipe((0,i.ofType)(ee),(0,s.switchMap)(()=>this.store.select(ae).pipe((0,s.take)(1),(0,s.map)(r=>x({trainings:r})),(0,s.catchError)(r=>(0,s.of)(wt({error:r}))))))),this.getUserTrainingsListSuccess$=(0,i.createEffect)(()=>this.actions$.pipe((0,i.ofType)(P,x),(0,s.switchMap)(({})=>(0,s.of)(p({initialized:R.TRAININGS}))))),this.finishUserTrainingListOnGoingRequest$=(0,i.createEffect)(()=>this.actions$.pipe((0,i.ofType)(te),(0,i.concatLatestFrom)(()=>[this.store.select(Rs)]),(0,s.filter)(([r,c])=>!!c),(0,s.switchMap)(([r,c])=>(0,s.of)($({training:{...c,finishDate:new Date}}))))),this.addUserTrainingListRequest$=(0,i.createEffect)(()=>this.actions$.pipe((0,i.ofType)(te),(0,i.concatLatestFrom)(()=>this.store.select(S)),(0,s.switchMap)(([{training:r},c])=>(0,s.iif)(()=>!!c,(0,s.of)(se({training:r})),(0,s.of)(re({training:r})))))),this.addAuthenticatedUserTrainingListRequest$=(0,i.createEffect)(()=>this.actions$.pipe((0,i.ofType)(se),(0,i.concatLatestFrom)(()=>this.store.select(S)),(0,s.switchMap)(([{training:r},c])=>this.trainingsService.setTraining(c?.uid,r).pipe((0,s.map)(E=>ie({training:E})),(0,s.catchError)(E=>(console.log("err",E),(0,s.of)(kt({error:E})))))))),this.addAnonymousUserTrainingListRequest$=(0,i.createEffect)(()=>this.actions$.pipe((0,i.ofType)(re),(0,i.concatLatestFrom)(()=>this.store.select(ae)),(0,s.switchMap)(([{training:r},c])=>(0,s.of)(r).pipe((0,s.take)(1),(0,s.map)(E=>ce({training:{...E,id:(c.length+1).toString()}})),(0,s.catchError)(E=>(0,s.of)(zt({error:E}))))))),this.updateUserTrainingListRequest$=(0,i.createEffect)(()=>this.actions$.pipe((0,i.ofType)(Jt),(0,i.concatLatestFrom)(()=>this.store.select(S)),(0,s.switchMap)(([{training:r},c])=>(0,s.iif)(()=>!!c,(0,s.of)($({training:r})),(0,s.of)(Ee({training:r})))))),this.updateAuthenticatedUserTrainingListRequest$=(0,i.createEffect)(()=>this.actions$.pipe((0,i.ofType)($),(0,i.concatLatestFrom)(()=>this.store.select(S)),(0,s.switchMap)(([{training:r},c])=>this.trainingsService.updateTraining(c?.uid,r).pipe((0,s.map)(E=>ne({training:E})),(0,s.catchError)(E=>(console.log("err",E),(0,s.of)(is({error:E})))))))),this.updateAnonymousUserTrainingListRequest$=(0,i.createEffect)(()=>this.actions$.pipe((0,i.ofType)(Ee),(0,s.switchMap)(({training:r})=>(0,s.of)(r).pipe((0,s.take)(1),(0,s.map)(c=>oe({training:c})),(0,s.catchError)(c=>(0,s.of)(Es({error:c})))))))}static#e=this.\u0275fac=function(c){return new(c||e)};static#t=this.\u0275prov=o.\u0275\u0275defineInjectable({token:e,factory:e.\u0275fac})}return e})();const a=(0,t.createFeatureSelector)(Ss),ae=(0,t.createSelector)(a,e=>e.list),as=(0,t.createSelector)(a,e=>e.query),js=(0,t.createSelector)(a,e=>e.query.filters),Bs=(0,t.createSelector)(a,e=>e.query.pagination),Rs=(0,t.createSelector)(a,e=>e.list.find(n=>!n.finishDate)),bs=e=>(0,t.createSelector)(a,n=>n.list.find(r=>r.id===e)),ks=e=>(0,t.createSelector)(a,n=>n.list.filter(r=>r.trainingExercises?.length&&r.trainingExercises.some(c=>c.exerciseTemplate.id===e))),us="SWITCH_NAVBAR",As=(0,t.createAction)(us),Us="CLOSE_NAVBAR",Re=(0,t.createAction)(Us),_s={menu:{navBar:{isOpened:!1}}},Is="layout",Ks=(0,t.createReducer)(_s,(0,t.on)(As,e=>({...e,menu:{...e.menu,navBar:{...e.menu.navBar,isOpened:!e.menu.navBar.isOpened}}})),(0,t.on)(Re,e=>({...e,menu:{...e.menu,navBar:{...e.menu.navBar,isOpened:!1}}}))),ue=(0,t.createAction)("SET CURRENT ROUTE",(0,t.props)());let Vs=(()=>{class e{constructor(){this.actions$=(0,o.inject)(i.Actions),this.setCurrentRoute$=(0,i.createEffect)(()=>this.actions$.pipe((0,i.ofType)(ue),(0,s.switchMap)(()=>(0,s.of)(Re()))))}static#e=this.\u0275fac=function(c){return new(c||e)};static#t=this.\u0275prov=o.\u0275\u0275defineInjectable({token:e,factory:e.\u0275fac})}return e})();const Ae=(0,t.createFeatureSelector)(Is),Ws=(0,t.createSelector)(Ae,e=>e.menu),zs=(0,t.createSelector)(Ae,e=>e.menu.navBar.isOpened),ps={prevRoute:void 0,currentRoute:void 0},Ns="router",Zs=(0,t.createReducer)(ps,(0,t.on)(ue,(e,{currentRoute:n})=>({...e,currentRoute:n,prevRoute:e.currentRoute})));var Js=T(2042);let ei=(()=>{class e{constructor(){this.actions$=(0,o.inject)(i.Actions),this.routerNavigatedAction$=(0,i.createEffect)(()=>this.actions$.pipe((0,i.ofType)(Js.routerNavigatedAction),(0,s.switchMap)(({payload:r})=>(0,s.of)(ue({currentRoute:r.routerState.url})))))}static#e=this.\u0275fac=function(c){return new(c||e)};static#t=this.\u0275prov=o.\u0275\u0275defineInjectable({token:e,factory:e.\u0275fac})}return e})();const Ue=(0,t.createFeatureSelector)(Ns),ti=(0,t.createSelector)(Ue,e=>e.currentRoute),si=(0,t.createSelector)(Ue,e=>e.prevRoute);let ii=(()=>{class e{constructor(){this.actions$=(0,o.inject)(i.Actions),this.initRequest$=(0,i.createEffect)(()=>this.actions$.pipe((0,s.filter)(r=>r.type.endsWith("Request")),(0,s.concatMap)(()=>(0,s.of)(L())))),this.endRequest$=(0,i.createEffect)(()=>this.actions$.pipe((0,s.filter)(r=>r.type.endsWith("Success")||r.type.endsWith("Error")),(0,s.concatMap)(()=>(0,s.of)(l()))))}static#e=this.\u0275fac=function(c){return new(c||e)};static#t=this.\u0275prov=o.\u0275\u0275defineInjectable({token:e,factory:e.\u0275fac})}return e})();var ri=T(6571);let ci=(()=>{class e{static#e=this.\u0275fac=function(c){return new(c||e)};static#t=this.\u0275mod=o.\u0275\u0275defineNgModule({type:e});static#s=this.\u0275inj=o.\u0275\u0275defineInjector({imports:[ri.CommonModule]})}return e})()}}]);